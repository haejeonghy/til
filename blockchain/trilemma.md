# Trilemma

* 3가지 문제가 각각 서로 영향을 주어 3가지의 문제가 각각 서로 영향을 주어 3가지 중 어느 것을 선택하면 다른 부분이 악화된다.
* 확장성, 탈중앙화, 보안이라는 세 가지 요소를 모두 만족하는 일이 얼마나 어려운지를 말한다.

## 확장성

* Scalability
* 사용자 수가 늘어나더라도 유연하게 대응할 수 있는 정도
* 확장성이 높으면 사용자수의 증가에 따라 거래건수가 늘어나더라도 무리없이 전송 처리용량을 증가시킬 수 있다.
* TPS Transaction Per Second가 높다고도 표현한다.
* 사용자의 수가 증가하거나 네트워크의 규모가 커지면서 데이터 처리량 또는 데이터 전송 건수가 얼마나 증가할 수 있는지
* 확장성 문제
  * 확장성이 커지면서 해결하지 못하는 문제
* 블록체인에서 반드시 해결해야할 핵심 요소
  * TPS또는 체인의 쳐리량을 늘리기 위해 트랜잭션의 결제 시간을 줄이는 것이 최종 목표
  * 비트코인
    * 확장성이 제한적이어서 비트코인 캐시로 하드포크하였다.
  * 이더리움
    * 확장성이 문제가 되어 알트코인이 등장하게 되었다.
* 블록체인 네트워크가 트랜잭션을 얼마나 빠르게 처리를 할 수 있는지
* 대량 채택에 중요하다.
* TPS
  * 블록체인 네트워크 성능지표
  * Transaction Per Second
  * 초당 트랜잭션 처리 속도
  * 비트코인과 이더리움은 확장성의 문제로 인해 TPS가 낮다.
    * 트랜잭션 처리에 드는 수수료가 비싸지는 이유
    * TPS가 낮다는 건 수수료가 비싸진다는 말과 동일하다.
* 확장성을 블록체인의 트랜잭션 처리속도로 이해해도 무방하다.
* 높은 TPS를 가진 네트워크는 사용자가 많아지더라도 네트워크를 안정적으로 운용할 수 있다.
* 확장성을 설명하는데 있어 TPS는 확장성을 쉽게 이해할 수 있도록 돕기도 한다.
  * TPS만으로 확장성을 설명하기에는 부족하다.
    * 확장성을 설명할때의 TPS를 Red Herring 이라고도 한다.
      * Red Herring : 주의를 다른 곳으로 분산시키는 무언가를 지칭할 때 주로 사용하는 단어
* E.O.S
  * 이오스
  * 3천 TPS돌파
  * 많은 서비스에서 상용화할 수 있는 블록체인 네트워크로 개발되었다.
  * 확장성에 중점을 둔 블록체인 프로젝트
  * 그래도 1초에 6,000건 이상의 트랜잭션을 유발하는 dApp이나 토큰이 생긴다면 이오스도 비트코인이나 이더리움처럼 병목현상을 보일 수 있다.
  * 2세대 암호화폐의 이슈를 해결하기 위한 3세대 코인
    * 이오스, 트론, 에이다, 이오스트
  * 과도한 중앙집권으로 비판받았다.
* 비자
  * 평균 63,000 TPS
  * EOS가 확장됨에 따라 수백만 TPS를 달성한다면 EOS를 채택하지 않을 이유가 없다.
* 높은 트랜잭션 처리량과 미래 성장을 지원하는 능력
* 확장성이 있는 블록체인 프로토콜은 사용 사례가 확장되고 블록체인 기술의 채택이 가속화되더라도 블록체인 성능이 전혀 저하되지 않는다.
* 여러 dApp이나 토큰을 기획하는 개인이나 회사가 블록체인 프로토콜을 채택하는 일이 증가할 때마다 성능이 저조해지는 블록체인은 확장성이 부족하다.
* 더 큰 확장성을 실현하려고 시도할 수 있지만 탈중앙화나 보안에 대해 결과적으로 어려움을 겪을 수 있다.
* 블록체인 네트워크가 유용성이 훨씬 우수한 기존의 중앙집권식 플랫폼과 경쟁하는데 있어 합리적인 경쟁을 할 수 있는 유일한 방법
* 많은 블록체인 플랫폼이 탈중앙화와 보안을 확립했지만 동시에 확장성을 달성하는 것은 오늘날에도 탈중앙화 네트워크의 주요 과제로 남아있다. 
* 확장성을 증가시키는 방법
  * 탈중앙화에 대한 타협
    * 거래를 검토하는 엔티티의 수를 줄인다.
  * 보안에 대한 타협
    * 네트워크의 난이도 감소를 요구하는 블록 타임을 감소시킨다.
* 확장성 중심 네트워크의 **장점**
  * 네트워크가 많은 양의 트랜잭션을 지원할 수 있도록 한다.
  * 소셜 메시징 애플리케이션과 같이 보안이 주요 초점이 아닌 애플리케이션에서 유용할 수 있다.
* 확장성 중심 네트워크의 **단점**
  * 보안을 희생해야 한다.
  * 네트워크가 확장됨에 따라 합의 매커니즘도 확장해야 중앙집중화를 벗어날 수 있다.

### 확장성을 타협한 암호화폐

* 약점
  * 블록에 거래가 포함될 때 속도의 지연
    * 블록 생성 주기, 데이터 크기 등 블록체인 플랫폼 구조에 기인한 수수료와 리소스 할당 문제
      * 비트코인의 경우 개선안 도출이 쉽다.
      * 이더리움의 경우 확장성 확보 방법이 어렵다.
  * 합의 노드들간 합의 과정에 소요되는 속도 지연 문제
    * 합의 알고리즘과 네트워크 확장성 요구에 따른 네트워크 자체 문제
      * 비트코인의 경우 기존 채굴업체들의 권력화로 인해 변경이 어렵다.
      * 이더리움의 경우 스마트 컨트랙트와 dApp 생태계 조성이라는 명제 때문에 개선안 도출이 쉽다.
        * CASPER 알고리즘을 이용한 PoS(Proof of Stake)를 적용한다.
        * 샤딩에서 발생하는 리소스 할당의 한계로 인해 본질적인 해결방법을 제안하기 쉽지 않다.
        * 블록에 포함되는 정보의 양을 줄여나가는 방법으로 확장성을 확보하려고 한다.

#### 비트코인

* 높은 탈중앙화와 보안
* 애초부터 탈중앙화와 보안에 초점을 맞추고 개발되었다.
* 암호화된 기술을 바탕으로 서버 역할을 하는 노드들이 네트워킹되어 블록체인을 검증하기 때문에 위변조가 불가능하다.
* 사용자가 늘어나면서 네트워크가 확장되고 트랜잭션 속도가 느려지는 문제가 확인되었다.
* 7 TPS 정도의 처리 속도
* 확장성 문제 해결을 위해 라이트닝 네트워크 (Lightning Network)와 같은 방법을 활용하여 속도를 높이고자 했다.
* 속도를 높이려고 노드의 수를 줄이거나, 일부만 검증하게 되면 네트워크 전체의 보안이 떨어진다.
* 보안을 위해 트랜잭션 속도를 포기했다.

#### 이더리움

* 이더리움 플랫폼 위의 dApp 상에서 이루어지는 거래를 1초에 약 20건밖에 처리할 수 없다. 
* 비탈릭 부테린이 확장성 문제 해결을 추구하는 이더리움 2.0을 발표했다.
  * 작업 증명 방식의 대안
  * 지분 증명 방식과 샤딩 Sharding 기술을 바탕으로 실생활에서 이더리움을 사용 가능한 수준까지 끌어올릴 수 있다.
    * Sharding
      * 이더리움 트랜잭션 처리 속도를 높이기 위한 기술
      * 지분 증명의 검증자를 소규모 그룹 Shard로 분리해 각 그룹이 서로 다른 이더리움 트랜잭션을 동시다발적으로 처리하는 방식
      * 실시간으로 거래처리를 할 수 있다.
      * 데이터베이스 저장 기법 중 하나
        * 하나의 데이터를 조각내고 네트워크를 통해 분산하여 저장한다.
  * 지분 증명 방식으로 작업 증명 방식의 단점을 극복하고 빠른 블록 검증과 합의가 가능하도록 개선하고자 한다.
    * 채굴 과정에서 큰 비용이 필요하지 않고, 블록체인 네트워크 수수료가 낮아지는 효과를 기대할 수 있다.
* 거래 속도 평균 매초 20건
* 스마트 컨트랙트 기능 목적
  * 가상화폐보다 폭넓은 영역에서 사용되는 것을 목적으로 한다.
  * 프로그래밍을 거래 형태로 저장하고 조건을 만족하면 자동으로 실행시키는 기능
  * 세계 컴퓨터
  * 계약화된 프로그래밍을 구동시키기 위해 적지 않은 리소스를 지속적으로 사용해야 한다.
    * 리소스는 이더리움의 블록을 생성하는 채굴노드가 감당해야 하는 것으로 무한정 공급이 불가능하다.
    * Gas
      * 수수료
      * 한 개의 블록이 만들어질 때 비트코인과 같이 블록 사이즈는 정해져있지 않지만 한개의 블록을 만들 때 리소스 할당에 상응하는 한계를 정해놓기 위해 수수료 명목으로 최대치가 670만으로 정해져있다.
* 크립토키티
  * 이더리움 플랫폼 위에서 구현한 고양이 수집 게임
  * 20만여명 플레이어를 모음
  * 이더리움 네트워크의 하루 트랜잭션 중 20%를 차지하며 전체 네트워크 속도가 떨어지고 거래비용인 수수료가 상승하게 됐다.
* 트랜잭션이 많아지면 스마트 컨트랙트 양도 많아진다.
* 수수료 최대치(gas limit)을 초과하는 컨트랙트들은 정상적인 블록에 포함되지 않고 다음 블록으로 미뤄지는 지연 상태가 지속된다.
* 단일 프로그램만 구동해도 네트워크 과부하 및 병목현상이 발생하는 것은 이더리움에 치명적인 약점이다.
* 비트코인과 비교해 비교적 성공적인 생태계를 만든 것으로 평가된다.
* dApp이 활성화되면 될수록 스마트 컨트랙트의 증가와 수수료의 가중문제는 이더리움 확장성에 치명적인 장애물로 인식된다.

## 탈중앙화

* Decentralization
* 중앙집권화를 벗어나 분산된 소규모 단위가 모여 자율적으로 운영되는 방식
* 블록체인은 기존의 서버-클라이언트 관계가 아니라 개별 노드들의 자발적이고 자율적인 연결에 의해 P2P 방식으로 동작한다.
* 블록체인 기술의 핵심 아이디어
* 블록체인 생태계 전반에 걸쳐 추진되고 있다.
* 분산된 프로세스와 기술을 적용하면 산업 전반에 걸쳐 중개자의 역할이 사라지고 다양한 방식의 거래 형태가 나타난다.
* 탈중앙화 네트워크는 훨씬 더 기본적인 수준에서 합의를 통해 의사결정을 내린다.
  * 누구도 이를 통해 거래되는 데이터를 제어하거나 검열할 수 없다.
  * 하지만 최적의 탈중앙화를 달성하면 네트워크 처리량을 감소하는 경향이 있다.
  * 더 많은 채굴 노드의 합의를 통해 네트워크를 보호하면 트랜잭션 속도가 떨어진다.
  * 다양한 서비스에서 블록체인 네트워크를 채택하는 장애물
* 퍼블릭 블록체인
  * 누구나 사용하고 노드로 참여할 수 있다.
  * 결정은 합의에 의해 이루어진다.
  * 트랜잭션이 개별 노드가 아닌 노드 그룹에 의해 승인된다.
  * 거래가 합의에 의해 확인되면 이후에는 변경할 수 없다.
  * 위험은 하나의 중앙 주체에 배치되지 않고, 거래를 수행할 때 다른 개인에게 신뢰로 의존하지 않는다.
* 속도
  * 트랜잭션이 합의에 도달하기 전에 여러번 확인해야 하는 경우 본질적으로 단일 엔터티에서 트랜잭션을 확인할 수 있는 경우보다 시간이 더 오래 걸린다.
  * 비트코인은 강력하게 분산되어있는 만큼 매우 느리다.
* 분산 네트워크에선 많은 이해자에게 의존할 수 있는 블록체인의 능력을 강조한다.
* 모든 블록체인이 동일한 정도로 탈중앙화되는 것은 아니다.
* 탈중앙화 중심 네트워크의 **장점**
  * 탈중앙화를 통해 사용자가 단일 엔티티를 신뢰하지 않고도 합의를 유지할 수 있다.
  * 분산화를 통해 시스템의 견고성을 증가시킨다.
  * 네트워크를 검열에 저항하게 하여 누구나 네트워크를 사용할 수 있도록 하여 재산권을 향상시킨다.
* 탈중앙화 중심 네트워크의 **단점**
  * 지연을 초래하고 네트워크 속도를 늦춘다.
  * 중복성을 도입하기 때문에 비용이 많이 들고 모든 애플리케이션에 바람직하지는 않는다.

### 탈중앙화를 타협한 암호화폐

* 탈중앙화에 손을 댄다는 것은 완전 자율에 가까운 채굴 방식을 특정 숫자의 노드로 극히 제한하여 극적인 성능 향상을 달성하는 것이다.
* 블록체인은 중앙집권형에 가까워지고 있다는 의미로 볼 수도 있다.
* 시스템에 매우 높은 가용성을 제공한다.
* 극도의 효율성을 위해 1개의 대표를 선출하게 될 수도 있다.
  * 1개의 대표 노드가 블록을 생성하면 포크와 블록 재조립이 발생하지 않고, 수행 순서까지 보증하는 블록체인이 탄생할수도 있다.
  * Hyperledger fabric
    * 기업형 블록체인
    * 수행 순서만 보증하는 kafka 사용

#### EOS

* 3세대 플랫폼 이오스
* 불특정 다수의 합의노드 참여를 제한한다.
* 위임지분증명 (DPoS) 합의 알고리즘을 채택하여 탈중앙화와 확장성 문제를 해결하려고 한다.
  * 전체 코인 보유자들이 21명의 블록 생성자를 선출 후 그들에게 블록체인 운영을 맡기는 방식
  * 각 노드가 가진 이오스 코인에 대한 지분을 투표를 통해 대표 노드에게 위임함으로써 민주적인 의사 결정 시스템을 가진다.
  * 대표 노드를 견제할 수 있다.
  * 탈중앙화 추가
  * 선출된 21개 노드에서만 거래를 검증하면 빠른 연산이 가능하다.
  * 트랜잭션 속도, 확장성 문제의 해결 추구
  * 탈중앙화와의 타협
  * EOS S/W에 반영
  * 노드의 개수가 소수라는 것은 블록 생성 시간을 단축하고 트랜잭션 속도를 높이지만 탈중앙화라는 가치에서 벗어날 수 있다.
  * 소수의 노드만이 블록 생성에 대한 보상인 이오스를 독점하며 이오스가 투표권을 가지고 있는 경우 블록 생성자의 권한이 시간이 갈수록 급격하게 성장한다.
  * 탈중앙화에서 벗어난다고 볼 수 있다.
  * 소수의 노드가 블록을 생성하기 때문에 노드에 대한 공격이 쉬워져 보안이 떨어진다.

#### Hyperledger

* 하이퍼레저
* 기업용 블록체인 기술 개발을 위한 오픈소스 프로젝트
* 하이퍼레저 합의 과정에 참여하려면 사전 승인이 필요하다.
* 프라이빗 블록체인이다. 
  * 프라이빗 블록체인
    * 신원이 모두 밝혀져 익명성이 없다.
    * 시스템 전체를 관리하는 중앙관리주체가 존재한다.
    * 주체가 참가자의 범위를 결정한다.
    * 신뢰할수 있는 참가자끼리 거래를 승인한다.
    * 참가자를 제한한다. 
    * 합의 알고리즘이 퍼블릭 블록체인에 비해 간단하다.
    * 네트워크 운영에 참여한 보상이 없다.
    * 정보의 외부 유출을 원치 않고 처리 속도를 중요시하는 기업을 중심으로 개발되고 있다.
    * 고도의 보안을 필요로 하는 정부에서도 이런 형태로 블록체인 도입을 고려한다.
* 컨소시엄 블록체인도 유사하다.
  * 특정 그룹 내에서 사전 합의에 따라 쓰기 권한을 가진다.
* 퍼미션드 블록체인
  * 프라이빗 블록체인 + 컨소시엄 블록체인
  * 허가형 블록체인

#### hybrid & consortium

* 표면적으로는 동일하게 들릴 수 있지만 다르다.
* consortium blockchain
  * 컨소시엄
  * 그룹은 컨소시엄 블룩체인을 관리한다.
  * 그룹은 블록체인이 어떻게 작동할지 결정한다.
  * 접근이 제한되어 있어 누가 먼저 접근할 것인지 그룹이 결정한다.
  * 제한된 엑세스는 더 빠른 트랜잭션, 높은 확장성, 더 나은 트랜잭션 개인 정보 보호를 의미한다.
  * 클레이튼 등
* hybrid blockchain
  * 공공 기관과 민간 기관의 조합
  * 사설 네트워크가 호스팅 되는 공용 블록체인 사용
    * 프라이빗 블록체인 자체를 통해 통제되는 제한된 참여 의미
    * 사설 네트워크를 사용하여 해시된 데이터 블록을 생성한 다음 데이터 프라이버시를 손상시키지 않고 해당 데이터를 공개적으로 저장하는 방식 
  * 블록체인에 대한 유연한 제어 제공
    * 공유된 데이터에 대한 제어가 이상적이지 않고 연합된 것 보다 좋지도 않다.
    * 확장성과 탈중앙화

## 보안

* Security
* 블록체인 내의 데이터나 프로그램을 권한이 없는 이용자가 사용할 수 없도록 제한하여 외부의 공격으로부터 프로그램을 보호한다.
* 해킹 불가능한 영역
* 이더리움 클랙식, 비트코인 볼드 등 해킹당하는 경우가 있으나 알고리즘의 허점이라고 보기 어렵고 노드 수가 부족하고 해시율이 낮아져서 생긴 해킹 위험
* 비트코인과 이더리움과 같이 메이저 코인들은 보안성이 매우 높다.
* 블록체인 생태계의 보안은 소스코드 자체에 달려있다.
  * 소스코드를 신중하게 검사해야 한다.
  * 소스코드의 투명성과 해킹에 성공했을 때의 이익으로 인해 블록체인이 해커들의 주요 표적이 되었다.
* 소스코드의 보안 결함은 블록체인 기술의 성장을 저해하는 요소
* 블록체인이 거래를 취소할 수 없도록 하는 능력
* 네트워크가 참가자가 보상을 받기 위해 리소스를 소비하도록 함으로써 가능하다.
* 네트워크 참가자가 더 많은 리소스를 사용할수록 블록체인의 보안이 강화된다.
* 보안 중심 네트워크의 **장점**
  * 기존 가치 이전보다 빠르고 저렴한 대규모 가치 이전이 가능하다.
  * 네트워크 참여자로부터 보안이 나온다.
  * 높은 보안은 복제하기 쉽지 않은 높은 네트워크 효과를 의미한다.
* 보안 중심 네트워크의 **단점**
  * 더 많은 자원, 투자가 필요하다.

## 세 요소의 상호작용과 한계

* 네트워크는 먼저 거래를 결제하기 위해 거래의 유효성에 동의해야 한다.
* 시스템에 많은 수의 참가자가 있는 경우 계약에 시간이 걸릴 수 있다.
* 유사한 보안 매개변수가 주어지면 확장성은 탈중앙화에 반비례한다.
* 두 개의 작업 증명 블록체인이 동일한 수준의 탈중앙화를 가지고 있다고 가정하면 보안 측면을 블록체인의 해시율이라고 생각할 수 있다. 
  * 해시율이 높을수록 확인시간이 짧아진다.
  * 보안과 함께 확장성이 높아진다.
* 지속적인 탈중앙화에서는 확장성과 보안이 비례한다.
* 블록체인은 세 가지 특성을 동시에 최적화할 수 없다.
  * 상호간의 절충이 필요하다.
  * 모든 요소를 양적 방향으로 개선시킬 수 없다.
* 확장성 트릴레마 
  * Scalability Trilemma
  * 이더리움의 창시자 비탈릭 부테린이 언급했다.
  * 중앙화 vs 탈중앙화 대치 관계
* 이더리움
  * De-Fi
  * Decentralized Finance
    * 탈중앙화 금융
  * 이더리움 플랫폼 사용량의 증가
  * 이더리움은 특정 수 이상의 트랜잭션이 발생했을 때 네트워크에서 이 트랜잭션을 처리하는 속도에 한게가 있다.
    * 수요 증가로 인해 일부 블록체인과 상호작용이 금지될 정도로 거래 수수료가 상승했다.
    * 트릴레마의 예
    * 이더리움이 보안이나 탈중앙화를 포기하지 않고서는 확장될 수 없었다.
  * 이더리움은 탈중앙화와 보안에 중점을 두어 트랜잭션수를 제한했다.
    * 사용자는 채굴자가 거래의 우선 순위를 사용자에게 할당하도록 하기 위해 더 높은 수수료를 지불하게 되었다.
  * 이더리움 런던 하드포크에서 EIP 1559 제안을 적용하면서 수수료 모델에서 개선이 있었다.
    * 블록 사이즈에 대한 조정, 채굴자에 대한 보상이 줄어들고 줄어든 보상에 대한 소각이 이루어진다.
    * 가스비 완화 효과, 소각으로 채굴자에게 집중되어 있는 보상을 네트워크 사용자 전체에게 돌아가도록 만드는 효과
* 비트코인도 탈중앙화와 보안을 선호했다.
* Ripple
  * 리블
  * 지불 솔루션
  * 탈중앙화보다 보안과 확장성을 선호한다.
* EOS
  * 탈중앙화와 보안을 희생하면서까지 확장성을 선호한다.