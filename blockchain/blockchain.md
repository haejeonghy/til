# Blockchain

## 자료구조로써의 블록체인

* 블록체인
  * 인터넷 상에 있는 사람들과 동일한 데이터를 가지는 것
  * 누구나 데이터를 추가할 수 있다.
  * 데이터는 한 번 추가되면 수정하거나 삭제할 수 없다.
  * 개인이나 단체가 데이터를 관리하는 것이 아니라 블록체인 네트워크에 있는 모든 사람들이 함께 관리한다.

### 블록

* block
* 데이터를 저장하는 공간
* 자산에 대한 정보를 담거나 개인정보를 암호화해서 담는 등 다양한 유형의 정보를 담을 수 있다.
* 어떤 종류의 데이터를 저장하느냐에 따라 블록의 구성이 결정된다.
* 암호화폐에서는 블록에 거래기록을 저장한다.
  * Transaction
    * 거래기록
    * A가 B에게 0.01 비트코인을 전송했다 등
    * 송금자에 대한 정보, 송금자의 잔액, 보내려는 금액, 수신자에 대한 정보
    * 사용자가 직접 자신의 자산에 대한 소유권을 증명하기 위한 디지털 서명을 추가한다.

#### 블록 생성

* 블록체인 네트워크에서 거래가 발생하여 새로운 트랜잭션이 생기면 이 트랜잭션이 네트워크 내에 있는 모든 노드들에 공유된다.
* 블록체인에서 다양한 검증 절차를 수행한다.
* 노드들은 공유받은 트랜잭션이 실제 송금자가 만든 트랜잭션이 맞는지, 악의적인 사용자가 타인을 사칭하는 것은 아닌지, 트랜잭션이 만들어지고 난 후 수정되지는 않았는지 검사한다.
  * 노드
    * 네트워크에 장치 또는 데이터 지점을 의미한다. 네트워크에 접속해있어 연결될 수 있는 컴퓨터를 지칭한다.
    * P2P로 연결되어 블록 체인 네트워크에 연결된 모든 블록 정보를 가지는 각각의 서버
    * 풀 노드
      * 모든 기능을 다 가지고 있는 노드
    * 라이트 노드
      * 모든 블록정보의 원본을 가지고 있지 않고 일종의 요약본 즉 헤더정보만 가지고 있는 노드
* 트랜잭션에 대한 유효성 검사가 끝나고 트랜잭션이 블록에 담기고, 해당 블록이 체인에 추가되어 블록체인의 일부가 될 때 트랜잭션에 대한 처리가 완료된다.
* 채굴
  * 트랜잭션들을 모아서 하나의 블록으로 만드는 과정
  * 암호화폐의 거래내역을 기록한 블록을 생성하고 그 대가로 암호화폐를 얻는 행위
  * 트랜잭션을 처리하는 작업
  * 암호화폐 시스템에서 송금 처리 의미
  * 암호 화폐 송금 서비스를 운영하는 핵심 역할
    * 채굴 노드에게 보상이 주어진다.
* 채굴 경쟁에 참여한 노드가 저마다 블록을 만들어 네트워크에 전파하고, 이 경쟁에서 승리한 노드가 생성한 블록이 채택된다.
* 블록을 받은 노드들은 해당 블록이 유효한지 확인하고 해당 블록이 유효하다면 체인에 추가한다.
* 채굴 노드는 블록 생성에 대한 보상으로 코인을 받고, 발행된 코인은 블록체인 네트워크 내에서 화폐의 역할을 하게 된다. 

### 체인
  
* chain  
* 블록 하나에 거래를 전부 기록하려고 하면 편의성이 떨어진다.
* 하나의 블록에 일정한 갯수의 트랜잭션을 넣어 네트워크에 공유하면 새로운 블록을 만들어 새롭게 생긴 트랜잭션들을 담는다.
* 새로운 블록에는 이전 블록을 지칭하는 데이터를 함께 넣어 직전 블록이 어떤 블록인지 지정한다.
* 일정량의 트랜잭션이 생길 때마다 해당 트랜잭션들을 블록에 넣고, 이전 블록을 가리키는 주소값을 함께 넣는 모양이 체인처럼 연결되어있어 데이터 구조를 블록체인이라고 부른다. 

### 분산원장과 블록체인

* 원장
  * 거래 내역의 집합
  * 블록체인은 원장을 저장하는 데이터베이스 유형 중 하나이다.
* 분산 원장
  * Distributed Ledger
  * 분산되어 있으며 데이터를 여러 위치에 두거나 여러 사용자들이 나눠서 가지고 있는 데이터베이스 유형
  * 분산 원장 시스템에서 데이터를 저장하기 위해서는 데이터를 공유하고 있는 당사자들이 합의해야 하며, 당사자들의 합의를 통해 분산되어 있는 데이터베이스들이 하나의 일관된 데이터를 가질 수 있다.
* 블록체인
  * 특정 기술들이 추가된 분산 원장의 한 종류
  * 네트워크 내 모든 노드들이 새로운 블록에 대한 유효성을 검증하고 난 후에 블록을 체인에 추가할 수 있다.

#### 분산원장과 블록체인의 차이

* 블록 구조
  * 블록체인은 일반적으로 블록 형태로 데이터가 저장된다.
  * 분산원장은 여러 노드에 데이터를 분산시켜 저장하는 데이터베이스이다. 블록형식이 아닌 다양한 방식으로 데이터를 저장할 수 있다. 
* 순서
  * 블록체인은 모든 블록이 직전 블록을 가리킴으로써 순서대로 배열되어 있다.
  * 분산원장에서는 데이터를 꼭 순서대로 저장하지는 않는다.
* 블록 생성 매커니즘
  * 블록체인은 생성할 노드를 정하기 위해 PoW, PoS와 같은 매커니즘을 사용한다. 보통 이런 매커니즘은 자원을 소모하게 한다.
  * 분산원장에서는 블록을 경쟁적으로 생성하지 않는 매커니즘을 사용하는 경우도 있다.
* 토큰
  * 블록체인은 블록을 생성하기 위해 자원을 소모한 노드에게 보상을 주기 위해 코인을 제공하며, 이 코인이 화폐의 역할을 한다.
  * 자원을 소모해서 블록을 생성하기 때문에 블록체인에는 코인이 필수적이다.