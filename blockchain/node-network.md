# 노드와 통신

* 블록체인은 블록과 트랜잭션 데이터를 확인할 수 있는 소프트웨어(노드)를 실행하는 컴퓨터의 분산 네트워크이다.
* 노드를 "실행"하려면 컴퓨터에 "클라이언트"라고 하는 응용 프로그램이 필요하다.

## P2P(Peer to Peer)

* 블록체인은 P2P 방식으로 운영
* P2P는 인터넷에 연결된 다수의 개별 사용자들이 중개기관을 거치지 않고 직접 데이터를 주고받는 것
* 네트워크에 중앙 컨트롤러가 없고, 모든 참여자가 서로 직접 소통
* P2P 방식은 기존의 서버-클라이언트 방식의 데이터 전송과는 본질적으로 다른 구조를 가지고 있다.
* 서버-클라이언트 구조에
  * 개별적인 참여자는 우선 서버에 데이터를 올려야 한다.
  * 다른 참여자가 해당 서버로부터 데이터를 받아오는 방식으로 작동한다.
  * 종단의 노드의 수가 늘어날수록 최소 분배 시간이 선형적으로 증가
* P2P
  * 모든 노드가 클라이언트이면서, 동시에 서버의 역할을 수행한다.
  * P2P 파일 시스템은 노드가 확장되더라도 최소 분배 시간이 로그함수 형태로 증가한다는 의미
* Distribution Time
  * 분배 시간
  * 모든 N개의 피어들이 파일의 복사본을 얻는 데 걸리는 시간
  * 최소 분배 시간
    * 모든 피어가 파일의 복사본을 얻는 데에 필요한 최소한의 값
    * 분배 시간이 작을수록, 모든 피어가 동일한 파일의 복사본을 가지는 시간이 적게 든다.
      * 하나의 파일을 모든 피어가 가지는 속도가 빨라진다.

## 노드와 클라이언트간 통신 JSON - RPC

* RPC(Remote Procedure Call)
  * 별도의 원격 제어를 위한 코딩 없이 다른 주소 공간에서 리모트의 함수나 프로시저를 실행 할 수 있게 해주는 프로세스간 통신
  * 분산컴퓨팅 환경에서 많이 사용
  * 현재에는 MSA(Micro Software Archtecture)에서 마이크로 서비스 간에도 많이 사용되는 방식
  * 서로 다른 환경이지만 서비스간의 프로시저 호출을 가능하게 해줌
    * 언어에 구애받지 않고 환경에 대한 확장이 가능
    * 비지니스 로직에 집중하여 생산성을 증가시킬 수 있다.
    * 프로시저
      * procedure
      * 프로세스를 절차적으로 기술해 놓은 것
* JSON-RPC API
  * 무상태성(Stateless)의 경량 RPC(원격 프로시저 호출) 프로토콜
  * Spec(사양; Specification)에는 여러 데이터 구조와 처리 규칙을 정의한다.
  * 소켓 통신이나 HTTP 등 다양한 메시지 전달 환경에서 사용할 수 있도록 추상화되어있다.
  * 이 프로토콜은 JSON(RFC 4627)의 데이터 형식으로 사용한다.
  * JSON-RPC API를 통해 이더리움 노드와 직접 상호작용할 수 있다.
    * dApp 개발자를 위한 더 편리한 옵션도 있다.
      * 자바스크립트와 백엔드를 위한 API 라이브러리가 많이 존재
      * 개발자는 (원리를 잘 모르더라도), 직관적인 한 줄의 메서드로 JSON-RPC API를 사용할 수 있다.
      * 대표적인 이더리움 자바스크립트 API Web3.js