# Aggregation Framework

* MongoDB에서 데이터를 파이프라인에 따라 처리할 수 있는 프레임워크
  * 파이프라인 : 처리작업을 순서대로 처리할 수 있다. 
* MongoDB에서 데이터를 쿼리하는 가장 간단한 방법
* 도큐먼트를 필터링하지 않고 그룹으로 데이터를 집계하거나 데이터를 수정할 수 있다. 
* 데이터 찾기 및 프로젝션 없이 작업을 수행하거나 계산할 수 있다. 
* 대괄호를 이용해 배열을 인자로 사용한다. 
* 각 단계 앞에는 `$`가 있고 뒤에 실행할 작업의 설명이 온다.
* `db.collection_name.aggregate([{$match:{조건}}, {$project:{조건}}])`
  * `$match` 사용하여 배열 포함되는 도큐먼트를 찾는다.
  * `$project` 연산자 사용하여 해당 필드만 projection 한다.
* `$group`
  * 들어온 데이터 스트림을 여러 개로 그룹화하는 연산자
  * `$match`와 같은 필터링 단계가 없으면 데이터 요약, 계산 및 그룹화를 수행할 때 원본 데이터를 수정하지 않는다. 
  * 필터링 단계가 있을 경우 이전 단계에서 가져온 데이터로 작업한다. 
  * `$sum`
    * javascript의 reduce와 유사하다.
    * 각 그룹으로 들어오는 도큐먼트 값에 대해 일정한 값을 추가하며 총게를 구할 수 있다. 